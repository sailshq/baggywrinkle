# baggywrinkle

Want to [reduce chafing](https://en.wikipedia.org/wiki/Baggywrinkle) when using Sails actions inside of AWS Lambda?  Baggywrinkle is the answer!

Baggywrinkle builds a modified version of a machine that proxies its inputs from the Lambda function's `event` argument, and proxies its exits through the Lambda function's callback.  It is intended to be used with Lambda functions that are triggered via the AWS API Gateway (that is, via HTTP requests).

```sh
$ npm install baggywrinkle --save
```


## Usage

```js
var lambdaFunction = require('baggywrinkle')(actionMachine);
```

## Example

```js
// handler.js
var asLambda = require('baggywrinkle');

module.exports = asLambda({
  inputs: {
    name: {
      example: 'Joe',
      description: 'The person to greet'
    }
  },
  exits: {
    success: {
      statusCode: 200,
      description: 'Greeting was successful!'
    }
  }
  fn: function (inputs, exits) {
    return exits.success(`Hello ${inputs.name}!`);
  }
});
```

Note that the input to Baggywrinkle can be either:

* a machine definition compatible with [machine-as-action](https://www.npmjs.com/package/machine-as-action) _or_
* a machine instance _generated by_ [machine-as-action](https://www.npmjs.com/package/machine-as-action)

## Options

For available options, see the [machine-as-action](https://www.npmjs.com/package/machine-as-action) documentation.  Note however that Baggywrinkle does not currently support:

* The `view` response type
* The `redirect` response type
* Custom Sails response types such as `badRequest`
* File uploads
* Streaming

## Bugs &nbsp; [![NPM version](https://badge.fury.io/js/baggywrinkle.svg)](http://npmjs.com/package/baggywrinkle)

To report a bug, [click here](http://sailsjs.com/bugs).


## Contributing &nbsp; [![Build Status](https://travis-ci.org/sailshq/baggywrinkle.svg?branch=master)](https://travis-ci.org/sailshq/baggywrinkle)

Please observe the guidelines and conventions laid out in the [Sails project contribution guide](http://sailsjs.com/documentation/contributing) when opening issues or submitting pull requests.

[![NPM](https://nodei.co/npm/baggywrinkle.png?downloads=true)](http://npmjs.com/package/baggywrinkle)


## License

MIT &copy; 2015-2016 The Sails Company

The [Sails framework](http://sailsjs.com) is free and open-source under the [MIT License](http://sailsjs.com/license).
